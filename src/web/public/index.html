<!DOCTYPE html>
<html lang="{{.LANGUAGE}}" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <title>Palworld Discord Bot</title>
  </head>
  <body class="container py-5">
    <form class="card">
      <div class="card-header">Discord Bot Config</div>
      <div class="card-body">
        <custom-switch
          id="enableDiscordBot"
          label="Enable Discord bot"
          class="mb-2"
        ></custom-switch>
        <custom-input
          id="discordBotToken"
          type="text"
          label="Bot token"
          tooltip="Get your bot token from the Discord Developer Portal."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="discordAdminUsernames"
          type="text"
          label="Admin Usernames"
          tooltip="Comma separated list of Discord usernames that will have admin access to the bot."
          class="mb-4"
        ></custom-input>

        <custom-switch
          id="discordCommandIgnoreCase"
          label="Command case sensitive"
          tooltip="If enabled, commands will be case sensitive."
          class="mb-2"
        ></custom-switch>
        <custom-input
          id="discordCommandPrefix"
          type="text"
          label="Command Prefix"
          tooltip="The prefix that the bot will listen for commands."
        ></custom-input>
      </div>
    </form>
  </body>
  <script
    async
    src="https://cdn.jsdelivr.net/npm/es-module-shims@1/dist/es-module-shims.min.js"
    crossorigin="anonymous"
  ></script>
  <script type="importmap">
    {
      "imports": {
        "@popperjs/core": "https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/esm/popper.min.js",
        "bootstrap": "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.esm.min.js"
      }
    }
  </script>

  <script type="module">
    import * as bootstrap from "bootstrap";

    import "/components/switch.js";
    import "/components/input.js";

    const tooltipTriggerList = document.querySelectorAll(
      '[data-bs-toggle="tooltip"]'
    );
    const tooltipList = [...tooltipTriggerList].map(
      (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
    );
  </script>

  <script>
    let enableDiscordBot = {{.DISCORD_BOT_ENABLED}};
    let discordBotToken = "{{.DISCORD_BOT_TOKEN}}";
    let discordAdminUsernames = "{{.DISCORD_ADMIN_USERNAMES}}";
    let discordCommandIgnoreCase = {{.DISCORD_COMMAND_IGNORE_CASE}};
    let discordCommandPrefix = "{{.DISCORD_COMMAND_PREFIX}}";

    const enableDiscordBotEl = document.getElementById("enableDiscordBot");
    const discordBotTokenEl = document.getElementById("discordBotToken");
    const discordAdminUsernamesEl = document.getElementById(
      "discordAdminUsernames"
    );
    const discordCommandIgnoreCaseEl = document.getElementById(
      "discordCommandIgnoreCase"
    );
    const discordCommandPrefixEl = document.getElementById(
      "discordCommandPrefix"
    );

    enableDiscordBotEl.setAttribute("checked", enableDiscordBot);
    discordBotTokenEl.setAttribute("value", discordBotToken);
    discordAdminUsernamesEl.setAttribute("value", discordAdminUsernames);
    discordCommandIgnoreCaseEl.setAttribute(
      "checked",
      discordCommandIgnoreCase
    );
    discordCommandPrefixEl.setAttribute("value", discordCommandPrefix);
  </script>
</html>
