<!DOCTYPE html>
<html lang="{{.CONFIG.LANGUAGE}}" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <title>Palworld Discord Bot</title>
  </head>

  <body class="container py-5">
    <form class="card mb-4">
      <div class="card-header">Language</div>

      <div class="card-body">
        <select class="form-select" aria-label="Select Language" id="language">
          {{range .CONFIG.LANGUAGES}}
          <option value="{{.CODE}}">{{.NAME}}</option>
          {{end}}
        </select>
      </div>
    </form>

    <form class="card mb-4">
      <div class="card-header">Discord Bot Config</div>
      <div class="card-body">
        <custom-switch
          id="discordBotEnabled"
          label="Enable Discord bot"
          class="mb-2"
        ></custom-switch>
        <custom-input
          id="discordBotToken"
          type="text"
          label="Bot token"
          tooltip="Get your bot token from the Discord Developer Portal."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="discordAdminUsernames"
          type="text"
          label="Admin Usernames"
          tooltip="Comma separated list of Discord usernames that will have admin access to the bot."
          class="mb-4"
        ></custom-input>

        <custom-switch
          id="discordCommandIgnoreCase"
          label="Command case sensitive"
          tooltip="If enabled, commands will be case sensitive."
          class="mb-2"
        ></custom-switch>
        <custom-input
          id="discordCommandPrefix"
          type="text"
          label="Command Prefix"
          tooltip="The prefix that the bot will listen for commands."
        ></custom-input>
      </div>
    </form>

    <form class="card">
      <div class="card-header">Palworld config</div>
      <div class="card-body">
        <custom-switch
          id="palworldRconEnabled"
          label="Enable RCON"
          class="mb-2"
        ></custom-switch>
        <custom-input
          id="palworldRconHost"
          type="text"
          label="RCON Host"
          tooltip="The IP address or hostname of the RCON server."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="palworldRconPort"
          type="number"
          label="RCON Port"
          tooltip="The port that the RCON server is running on."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="palworldAdminPassword"
          type="text"
          label="Admin Password"
          tooltip="The password for the RCON server."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="palworldServerFilePath"
          type="text"
          label="Server File Path"
          tooltip="The file path to the Palworld server executable."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="palworldServerExecuteFlags"
          type="text"
          label="Server Execute Flags"
          tooltip="The flags to pass to the server executable."
        ></custom-input>
      </div>
    </form>

    <form class="card">
      <div class="card-header">Discord Channel Config</div>
      <div class="card-body">
        <custom-input
          id="discordDashboardChannelId"
          type="text"
          label="Dashboard Channel ID"
          tooltip="The channel ID for the dashboard."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="discordLogChannelId"
          type="text"
          label="Log Channel ID"
          tooltip="The channel ID for the bot logs."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="discordDashboardOnlinePlayersMessageId"
          type="text"
          label="Online Players Message ID"
          tooltip="The message ID for the online players message."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="discordDashboardPalworldConfigMessageId"
          type="text"
          label="Palworld Config Message ID"
          tooltip="The message ID for the Palworld config message."
          class="mb-2"
        ></custom-input>
        <custom-input
          id="discordDashboardBotConfigMessageId"
          type="text"
          label="Bot Config Message ID"
          tooltip="The message ID for the bot config message."
        ></custom-input>
      </div>
    </form>
  </body>

  <script
    async
    src="https://cdn.jsdelivr.net/npm/es-module-shims@1/dist/es-module-shims.min.js"
    crossorigin="anonymous"
  ></script>
  <script type="importmap">
    {
      "imports": {
        "@popperjs/core": "https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/esm/popper.min.js",
        "bootstrap": "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.esm.min.js"
      }
    }
  </script>

  <script type="module">
    import * as bootstrap from "bootstrap";

    import "/components/switch.js";
    import "/components/input.js";

    const tooltipTriggerList = document.querySelectorAll(
      '[data-bs-toggle="tooltip"]'
    );
    const tooltipList = [...tooltipTriggerList].map(
      (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
    );
  </script>

  <script>
    /** @type {HTMLSelectElement} */
    const languageEl = document.getElementById("language");
    languageEl.value = "{{.CONFIG.LANGUAGE}}";

    const discordBotEnabledEl = document.getElementById("discordBotEnabled");
    const discordBotTokenEl = document.getElementById("discordBotToken");
    const discordAdminUsernamesEl = document.getElementById(
      "discordAdminUsernames"
    );
    const discordCommandIgnoreCaseEl = document.getElementById(
      "discordCommandIgnoreCase"
    );
    const discordCommandPrefixEl = document.getElementById(
      "discordCommandPrefix"
    );

    discordBotEnabledEl.setAttribute("checked", {{.CONFIG.DISCORD_BOT_ENABLED}});
    discordBotTokenEl.setAttribute("value", "{{.CONFIG.DISCORD_BOT_TOKEN}}");
    discordAdminUsernamesEl.setAttribute("value", "{{.CONFIG.DISCORD_ADMIN_USERNAMES}}");
    discordCommandIgnoreCaseEl.setAttribute("checked", {{.CONFIG.DISCORD_COMMAND_IGNORE_CASE}});
    discordCommandPrefixEl.setAttribute("value", "{{.CONFIG.DISCORD_COMMAND_PREFIX}}");

    const palworldRconEnabledEl = document.getElementById("palworldRconEnabled");
    const palworldRconHostEl = document.getElementById("palworldRconHost");
    const palworldRconPortEl = document.getElementById("palworldRconPort");
    const palworldAdminPasswordEl = document.getElementById("palworldAdminPassword");
    const palworldServerFilePathEl = document.getElementById("palworldServerFilePath");
    const palworldServerExecuteFlagsEl = document.getElementById("palworldServerExecuteFlags");

    palworldRconEnabledEl.setAttribute("checked", {{.CONFIG.PALWORLD_RCON_ENABLED}});
    palworldRconHostEl.setAttribute("value", "{{.CONFIG.PALWORLD_RCON_HOST}}");
    palworldRconPortEl.setAttribute("value", {{.CONFIG.PALWORLD_RCON_PORT}});
    palworldAdminPasswordEl.setAttribute("value", "{{.CONFIG.PALWORLD_ADMIN_PASSWORD}}");
    palworldServerFilePathEl.setAttribute("value", "{{.CONFIG.PALWORLD_SERVER_FILE_PATH}}");
    palworldServerExecuteFlagsEl.setAttribute("value", "{{.CONFIG.PALWORLD_SERVER_EXECUTE_FLAGS}}");

    const discordDashboardChannelIdEl = document.getElementById("discordDashboardChannelId");
    const discordLogChannelIdEl = document.getElementById("discordLogChannelId");
    const discordDashboardOnlinePlayersMessageIdEl = document.getElementById("discordDashboardOnlinePlayersMessageId");
    const discordDashboardPalworldConfigMessageIdEl = document.getElementById("discordDashboardPalworldConfigMessageId");
    const discordDashboardBotConfigMessageIdEl = document.getElementById("discordDashboardBotConfigMessageId");

    discordDashboardChannelIdEl.setAttribute("value", "{{.CONFIG.DISCORD_DASHBOARD_CHANNEL_ID}}");
    discordLogChannelIdEl.setAttribute("value", "{{.CONFIG.DISCORD_LOG_CHANNEL_ID}}");
    discordDashboardOnlinePlayersMessageIdEl.setAttribute("value", "{{.CONFIG.DISCORD_DASHBOARD_ONLINE_PLAYERS_MESSAGE_ID}}");
    discordDashboardPalworldConfigMessageIdEl.setAttribute("value", "{{.CONFIG.DISCORD_DASHBOARD_PALWORLD_CONFIG_MESSAGE_ID}}");
    discordDashboardBotConfigMessageIdEl.setAttribute("value", "{{.CONFIG.DISCORD_DASHBOARD_BOT_CONFIG_MESSAGE_ID}}");
  </script>
</html>
